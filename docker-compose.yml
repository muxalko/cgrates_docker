version: "2"
services:
  redis:
      image: bitnami/redis:latest
      container_name: redis-master
      volumes:
          - /traces/redis:/bitnami/redis
      ports:
        - '6379:6379'
      environment:
        # ALLOW_EMPTY_PASSWORD is recommended only for development.
        - ALLOW_EMPTY_PASSWORD=yes
        - REDIS_DISABLE_COMMANDS=FLUSHDB,FLUSHALL
      hostname: redis
      networks:
        - redis-net
      logging:
        driver: "json-file"
        options:
          max-size: "100m"
          max-file: "1"

  cgr-engine-diameter:
      image: gitlab-ptk.gt.local:5005/cgr-engine:76dcc17
      container_name: cgr-engine-diameter
      volumes:
          - $PWD/config/common:/etc/cgrates/common
          - $PWD/config/diameter:/etc/cgrates/diameter
      ports:
          - "3868:3868"
      depends_on:
          - redis
      environment:
          - CGR-SERVICE=diameter
      logging:
        driver: "json-file"
        options:
          max-size: "100m"
          max-file: "1"

networks:
  redis-net:

volumes:
  redis_data:
    driver: local
